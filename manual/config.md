# `Config` 类使用说明

## 一、概述

 `Config` 类位于 `Sharky\Core` 命名空间下，是框架中的配置管理器模块。它主要负责加载框架核心配置文件以及站点配置文件，并提供了根据指定路径获取配置值的功能。通过该类，可以方便地在应用程序中统一管理和获取各种配置信息。

## 二、类的初始化

在使用 `Config` 类之前，无需手动传入配置文件路径等参数。当创建 `Config` 类的实例时，其构造函数会自动执行 `initConfigs` 方法来初始化配置信息，尝试加载框架核心配置文件。

## 三、具体方法使用说明

### 1. `initConfigs` 方法

- **功能**：该方法在构造函数中被调用，用于加载框架核心配置文件。它首先会检查核心配置目录是否存在，如果不存在则抛出异常。若目录存在，则通过调用 `loadConfigByDir` 方法来加载该目录下的所有PHP配置文件，并将加载后的配置数据存储在 `$configs` 属性中。
- **示例**：
此方法通常在类实例化时自动执行，无需手动调用

### 2. `loadConfigs` 方法

- **功能**：用于加载站点配置目录下的配置文件，并将其与已加载的核心配置进行深度合并。首先会检查站点配置目录是否存在，若不存在则抛出异常。若存在，则通过 `loadConfigByDir` 方法加载该目录下的配置文件，然后使用 `ArrayUtils::deepMerge` 方法将站点配置数据与之前加载的核心配置数据（存储在 `$configs` 属性中）进行合并，更新 `$configs` 属性的值。
- **示例**：
此方法通常在框架启动时自动执行，无需手动调用

### 3. `get($path, $default = null)` 方法

- **功能**：根据点分字符串形式的路径来读取配置值。它会在已经加载并合并好的配置数据（存储在 `$configs` 属性中）中查找指定路径对应的配置值，如果找不到则返回默认值（如果提供了默认值的话）。
- **示例**：
假设在配置文件中有一个数据库配置项，配置文件结构可能类似这样（以 `database.php` 为例）：

 ``` php
return [
    'host' => 'localhost',
    'port' => 3306,
    'username' => 'root',
    'password' => 'password',
    'database' => 'your_database_name'
];
 ```

要获取数据库的主机地址配置值，可以这样使用 `get` 方法：

通常在控制器和模型中，你可以直接使用$this->config

 ``` php

$host = $this->config->get('database.host', 'localhost');
echo $host; // 如果配置文件中没有设置该项，则输出默认值'localhost'
 ```

或者你可以通过容器来获取

 ``` php
$container = Container::getInstance();
$config = $container->make('config');
 ```

---

本文档是在 AI 生成的内容的基础上修订，其信息不保证完全准确。

在使用过程中，如果您发现了任何问题或者有疑问，可以通过 new issues 的方式反馈，我们会及时处理。感谢您的理解与支持。

修订：2024-11-6 22点

[返回目录](/SharkyPHP.md)
